# Walkthrough: InternacionalizaciÃ³n (i18n) - Astra Campaign

## Resumen

Se implementÃ³ el sistema de internacionalizaciÃ³n en el frontend de Astra Campaign con soporte completo para **tres idiomas**:
- ðŸ‡§ðŸ‡· **PortuguÃ©s** (idioma por defecto)
- ðŸ‡ªðŸ‡¸ **EspaÃ±ol**
- ðŸ‡¬ðŸ‡§ **InglÃ©s**

---

## DemostraciÃ³n

### Video de Cambio de Idioma

![DemostraciÃ³n del selector de idioma](C:/Users/tom_j/.gemini/antigravity/brain/ea3fd76c-212c-41aa-a1fc-f895f3577d29/i18n_demo_1765868797341.webp)

### Capturas de Pantalla

````carousel
![PÃ¡gina de Login en PortuguÃ©s](C:/Users/tom_j/.gemini/antigravity/brain/ea3fd76c-212c-41aa-a1fc-f895f3577d29/login_page_pt_1765868880806.png)
<!-- slide -->
![Selector de Idioma Abierto](C:/Users/tom_j/.gemini/antigravity/brain/ea3fd76c-212c-41aa-a1fc-f895f3577d29/lang_dropdown_open_1765868913478.png)
<!-- slide -->
![PÃ¡gina de Login en EspaÃ±ol](C:/Users/tom_j/.gemini/antigravity/brain/ea3fd76c-212c-41aa-a1fc-f895f3577d29/login_page_es_1765868947071.png)
<!-- slide -->
![PÃ¡gina de Login en InglÃ©s](C:/Users/tom_j/.gemini/antigravity/brain/ea3fd76c-212c-41aa-a1fc-f895f3577d29/login_page_en_1765869015728.png)
````

---

## Cambios Realizados

### 1. Dependencias Instaladas

```bash
npm install i18next react-i18next i18next-browser-languagedetector
```

### 2. Archivos Nuevos Creados

| Archivo | DescripciÃ³n |
|---------|-------------|
| [i18n.ts](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/i18n.ts) | ConfiguraciÃ³n principal de i18next |
| [locales/pt/translation.json](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/locales/pt/translation.json) | Traducciones en PortuguÃ©s |
| [locales/es/translation.json](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/locales/es/translation.json) | Traducciones en EspaÃ±ol |
| [locales/en/translation.json](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/locales/en/translation.json) | Traducciones en InglÃ©s |
| [LanguageSelector.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/components/LanguageSelector.tsx) | Componente selector de idioma |

### 3. Componentes Actualizados

render_diffs(file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/main.tsx)

render_diffs(file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/components/Header.tsx)

render_diffs(file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/components/Navigation.tsx)

### 4. PÃ¡ginas Actualizadas

- âœ… [LoginPage.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/pages/LoginPage.tsx)
- âœ… [ContactsPage.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/pages/ContactsPage.tsx)
- âœ… [UsersPage.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/pages/UsersPage.tsx)
- âœ… [CampaignsPage.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/pages/CampaignsPage.tsx)
- âœ… [SettingsPage.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/pages/SettingsPage.tsx)
- âœ… [SuperAdminPage.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/pages/SuperAdminPage.tsx)
- âœ… [FlowBuilderPage.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/pages/FlowBuilderPage.tsx)
- âœ… [WhatsAppConnectionsPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/WhatsAppConnectionsPage.tsx) (Migrated previously)

### 5. Componentes Adicionales Actualizados

- âœ… [Pagination.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/components/Pagination.tsx)
- âœ… [SearchAndFilters.tsx](file:///h:/camaÃ±a%20astra%20online/source/astracampaign/frontend/src/components/SearchAndFilters.tsx)

---

## CÃ³mo Usar

### Selector de Idioma

El selector de idioma estÃ¡ disponible en **dos lugares**:

1. **Header** - En la barra superior, junto al selector de tenant
2. **Navigation** - En el menÃº lateral, debajo de las opciones de menÃº

![Selector de Idioma](El selector muestra las banderas de los idiomas disponibles)

### Persistencia

El idioma seleccionado se guarda en `localStorage` con la clave `astra-language` y se restaura automÃ¡ticamente al recargar la pÃ¡gina.

### Agregar Nuevas Traducciones

Para agregar nuevos textos traducibles:

1. Agregar la clave en los tres archivos de traducciÃ³n:
   - [src/locales/pt/translation.json](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/locales/pt/translation.json)
   - [src/locales/es/translation.json](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/locales/es/translation.json)
   - [src/locales/en/translation.json](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/locales/en/translation.json)

2. Usar en el componente:
```tsx
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t } = useTranslation();
  
  return <h1>{t('mySection.myKey')}</h1>;
}
```

---

## VerificaciÃ³n

### Build de ProducciÃ³n
```bash
npm run build
```
âœ… **Resultado**: Build completado exitosamente

### Servidor de Desarrollo
```bash
npm run dev
```

---

## Trabajo Pendiente

Las siguientes pÃ¡ginas y componentes aÃºn tienen textos hardcoded:

### PÃ¡ginas Grandes (Requieren MigraciÃ³n)
- [x] [CampaignsPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/CampaignsPage.tsx) (~143KB - archivo muy grande)
- [x] [SettingsPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/SettingsPage.tsx)
- [x] [WhatsAppConnectionsPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/WhatsAppConnectionsPage.tsx)
- [x] [SuperAdminPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/SuperAdminPage.tsx) y relacionadas
- [x] [FlowBuilderPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/FlowBuilderPage.tsx)
- [x] [InteractiveCampaignPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/InteractiveCampaignPage.tsx)


### Componentes Pendientes
- [x] [ContactForm.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/ContactForm.tsx) (Completed)
- [x] [ContactList.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/ContactList.tsx) (Completed)
- [x] [CategoryModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/CategoryModal.tsx) (Completed)
- [x] [CSVImportModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/CSVImportModal.tsx) (Completed)
- [x] [BulkEditModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/BulkEditModal.tsx) (Completed)
- [x] [ChatwootSyncModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/ChatwootSyncModal.tsx) (Completed)
- [x] [PerfexImportModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/PerfexImportModal.tsx) (Completed)
- [x] [UserForm.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/UserForm.tsx) (Completed)
- [x] [UserList.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/UserList.tsx) (Completed)
- [x] [PerfexSyncModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/PerfexSyncModal.tsx) (Completed)
- [ ] Y otros modales

> [!TIP]
> El patrÃ³n de implementaciÃ³n ya estÃ¡ establecido. Para migrar los archivos restantes, simplemente sigue el mismo patrÃ³n: importar `useTranslation`, obtener la funciÃ³n [t()](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/SuperAdminPage.tsx#5-26), y reemplazar los textos hardcoded con llamadas a [t('clave')](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/SuperAdminPage.tsx#5-26).

---

## Estructura de Claves de TraducciÃ³n

```
translation.json
â”œâ”€â”€ common          # Textos comunes (botones, estados)
â”œâ”€â”€ auth            # Login, logout, validaciones
â”œâ”€â”€ navigation      # MenÃº de navegaciÃ³n
â”œâ”€â”€ header          # Encabezado (roles de usuario)
â”œâ”€â”€ contacts        # PÃ¡gina de contactos
â”œâ”€â”€ categories      # GestiÃ³n de categorÃ­as
â”œâ”€â”€ campaigns       # CampaÃ±as
â”œâ”€â”€ users           # Usuarios
â”œâ”€â”€ whatsapp        # Conexiones WhatsApp
â”œâ”€â”€ settings        # Configuraciones
â”œâ”€â”€ superAdmin      # Panel Super Admin
â”œâ”€â”€ flowBuilder     # Editor de flujos
â”œâ”€â”€ errors          # Mensajes de error
â”œâ”€â”€ language        # Nombres de idiomas
â””â”€â”€ pagination      # PaginaciÃ³n
```
