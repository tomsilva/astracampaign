# Plan de Internacionalizaci√≥n (i18n) - Astra Campaign Frontend

## Descripci√≥n del Problema

El frontend de **Astra Campaign** actualmente tiene todos los textos de la interfaz de usuario **hardcoded en portugu√©s**. Se requiere implementar soporte para **tres idiomas**:
- üá™üá∏ **Espa√±ol** (es)
- üá¨üáß **Ingl√©s** (en)
- üáßüá∑ **Portugu√©s** (pt) - idioma actual

## An√°lisis del Estado Actual

### Tecnolog√≠as del Frontend
| Tecnolog√≠a | Versi√≥n | Uso |
|------------|---------|-----|
| React | 18.2.0 | Framework UI |
| TypeScript | 5.9.2 | Tipado est√°tico |
| Vite | 5.0.8 | Build tool |
| Tailwind CSS | 3.3.6 | Estilos |
| React Router | 7.9.1 | Navegaci√≥n |

### Archivos a Modificar

Se identificaron los siguientes archivos con textos hardcoded:

**P√°ginas** (15 archivos en `src/pages/`):
- [LoginPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/LoginPage.tsx) - Formulario de login, mensajes de bienvenida
- [ContactsPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/ContactsPage.tsx) - Gesti√≥n de contactos
- [CampaignsPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/CampaignsPage.tsx) - Gesti√≥n de campa√±as (~143KB, archivo grande)
- [UsersPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/UsersPage.tsx) - Gesti√≥n de usuarios
- [SettingsPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/SettingsPage.tsx) - Configuraciones
- [WhatsAppConnectionsPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/WhatsAppConnectionsPage.tsx) - Conexiones WhatsApp
- [FlowBuilderPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/FlowBuilderPage.tsx) - Editor de flujos
- [InteractiveCampaignPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/InteractiveCampaignPage.tsx) - Campa√±as interactivas
- [SuperAdminPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/SuperAdminPage.tsx), [SuperAdminDashboard.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/SuperAdminDashboard.tsx), [SuperAdminManagerPage.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/pages/SuperAdminManagerPage.tsx)

**Componentes** (27+ archivos en `src/components/`):
- [Navigation.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/Navigation.tsx) - Men√∫ de navegaci√≥n lateral
- [Header.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/Header.tsx) - Encabezado de p√°ginas
- [ContactForm.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/ContactForm.tsx), [ContactList.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/ContactList.tsx) - Formularios de contactos
- [CategoryModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/CategoryModal.tsx), [CSVImportModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/CSVImportModal.tsx), [BulkEditModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/BulkEditModal.tsx)
- [ChatwootSyncModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/ChatwootSyncModal.tsx), [PerfexImportModal.tsx](file:///h:/cama%C3%B1a%20astra%20online/source/astracampaign/frontend/src/components/PerfexImportModal.tsx)
- Y m√°s...

---

## Propuesta de Implementaci√≥n

### Librer√≠a Recomendada: `react-i18next`

La elecci√≥n de **react-i18next** se basa en:
- ‚úÖ Es el est√°ndar de facto para i18n en React
- ‚úÖ Excelente integraci√≥n con TypeScript
- ‚úÖ Soporte para lazy loading de traducciones
- ‚úÖ Hooks modernos (`useTranslation`)
- ‚úÖ Amplia comunidad y documentaci√≥n

---

## Proposed Changes

### Dependencias

#### [MODIFY] [package.json](file:///h:/cama√±a%20astra%20online/source/astracampaign/frontend/package.json)

Agregar las siguientes dependencias:
```json
{
  "dependencies": {
    "i18next": "^24.2.0",
    "react-i18next": "^15.4.0",
    "i18next-browser-languagedetector": "^8.0.0"
  }
}
```

---

### Configuraci√≥n i18n

#### [NEW] [i18n.ts](file:///h:/cama√±a%20astra%20online/source/astracampaign/frontend/src/i18n.ts)

Archivo de configuraci√≥n principal de i18next:
```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

import esTranslation from './locales/es/translation.json';
import enTranslation from './locales/en/translation.json';
import ptTranslation from './locales/pt/translation.json';

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources: {
      es: { translation: esTranslation },
      en: { translation: enTranslation },
      pt: { translation: ptTranslation }
    },
    fallbackLng: 'pt', // Idioma actual como fallback
    interpolation: {
      escapeValue: false
    },
    detection: {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage']
    }
  });

export default i18n;
```

---

### Estructura de Archivos de Traducci√≥n

#### [NEW] [locales/](file:///h:/cama√±a%20astra%20online/source/astracampaign/frontend/src/locales/)

```
src/locales/
‚îú‚îÄ‚îÄ es/
‚îÇ   ‚îî‚îÄ‚îÄ translation.json    # Espa√±ol
‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îî‚îÄ‚îÄ translation.json    # Ingl√©s
‚îî‚îÄ‚îÄ pt/
    ‚îî‚îÄ‚îÄ translation.json    # Portugu√©s (actual)
```

#### Ejemplo de estructura de claves:

```json
{
  "common": {
    "save": "Guardar",
    "cancel": "Cancelar",
    "delete": "Eliminar",
    "edit": "Editar",
    "loading": "Cargando...",
    "error": "Error",
    "success": "√âxito"
  },
  "auth": {
    "login": {
      "title": "Bienvenido",
      "subtitle": "Inicia sesi√≥n para acceder a tu cuenta",
      "email": "Correo electr√≥nico",
      "password": "Contrase√±a",
      "submit": "Entrar",
      "submitting": "Entrando..."
    },
    "validation": {
      "invalidEmail": "Correo electr√≥nico inv√°lido",
      "passwordMinLength": "La contrase√±a debe tener al menos 6 caracteres"
    }
  },
  "navigation": {
    "connections": "Conexiones",
    "contacts": "Contactos",
    "campaigns": "Campa√±as",
    "interactiveCampaign": "Campa√±a Interactiva",
    "users": "Usuarios",
    "settings": "Configuraciones",
    "superAdmin": "Super Admin",
    "logout": "Salir"
  },
  "contacts": {
    "title": "Contactos",
    "newContact": "Nuevo Contacto",
    "categories": "Categor√≠as",
    "importCSV": "Importar CSV",
    "selectedCount": "{{count}} contacto(s) seleccionado(s)",
    "totalCount": "{{count}} contactos registrados"
  }
  // ... m√°s secciones
}
```

---

### Componente Selector de Idioma

#### [NEW] [LanguageSelector.tsx](file:///h:/cama√±a%20astra%20online/source/astracampaign/frontend/src/components/LanguageSelector.tsx)

```typescript
import { useTranslation } from 'react-i18next';

const languages = [
  { code: 'es', name: 'Espa√±ol', flag: 'üá™üá∏' },
  { code: 'en', name: 'English', flag: 'üá¨üáß' },
  { code: 'pt', name: 'Portugu√™s', flag: 'üáßüá∑' }
];

export function LanguageSelector() {
  const { i18n } = useTranslation();

  return (
    <select
      value={i18n.language}
      onChange={(e) => i18n.changeLanguage(e.target.value)}
      className="..."
    >
      {languages.map((lang) => (
        <option key={lang.code} value={lang.code}>
          {lang.flag} {lang.name}
        </option>
      ))}
    </select>
  );
}
```

---

### Modificaci√≥n de Componentes Existentes

#### [MODIFY] [main.tsx](file:///h:/cama√±a%20astra%20online/source/astracampaign/frontend/src/main.tsx)

Importar configuraci√≥n de i18n:
```diff
+ import './i18n';
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
```

#### [MODIFY] [LoginPage.tsx](file:///h:/cama√±a%20astra%20online/source/astracampaign/frontend/src/pages/LoginPage.tsx)

Ejemplo de migraci√≥n:
```diff
+ import { useTranslation } from 'react-i18next';

export function LoginPage() {
+ const { t } = useTranslation();
  
  const loginSchema = z.object({
-   email: z.string().email('E-mail inv√°lido'),
-   senha: z.string().min(6, 'Senha deve ter pelo menos 6 caracteres'),
+   email: z.string().email(t('auth.validation.invalidEmail')),
+   senha: z.string().min(6, t('auth.validation.passwordMinLength')),
  });

  return (
    <div>
-     <h2>Bem-vindo!</h2>
-     <p>Fa√ßa login para acessar sua conta</p>
+     <h2>{t('auth.login.title')}</h2>
+     <p>{t('auth.login.subtitle')}</p>
      {/* ... */}
    </div>
  );
}
```

#### [MODIFY] [Navigation.tsx](file:///h:/cama√±a%20astra%20online/source/astracampaign/frontend/src/components/Navigation.tsx)

```diff
+ import { useTranslation } from 'react-i18next';

export function Navigation() {
+ const { t } = useTranslation();

  const menuItems = [
    {
      path: '/whatsapp',
-     label: 'Conex√µes',
+     label: t('navigation.connections'),
      icon: (...)
    },
    // ...
  ];
}
```

---

## Verificaci√≥n

### Tests Manuales
1. Verificar que el cambio de idioma funciona en todas las p√°ginas
2. Verificar que el idioma se persiste al recargar la p√°gina
3. Verificar que no quedan textos hardcoded sin traducir
4. Verificar que las interpolaciones (ej: `{{count}}`) funcionan correctamente

### Comandos
```bash
# Instalar dependencias
npm install i18next react-i18next i18next-browser-languagedetector

# Ejecutar en desarrollo
npm run dev

# Build de producci√≥n
npm run build
```

---

## Estimaci√≥n de Esfuerzo

| Fase | Archivos | Complejidad | Esfuerzo Estimado |
|------|----------|-------------|-------------------|
| Configuraci√≥n | 3-4 | Baja | 1-2 horas |
| Archivos de traducci√≥n | 3 | Media | 4-6 horas |
| Migraci√≥n de p√°ginas | 10-15 | Alta | 8-12 horas |
| Migraci√≥n de componentes | 25+ | Alta | 10-15 horas |
| Testing | - | Media | 2-3 horas |
| **Total** | **40+** | - | **25-38 horas** |

---

## User Review Required

> [!IMPORTANT]
> **Decisiones que requieren aprobaci√≥n:**

1. **Idioma por defecto**: ¬øDeber√≠a ser Portugu√©s (actual) o Espa√±ol?
2. **Ubicaci√≥n del selector de idioma**: ¬øEn el Header, en la Navigation, o ambos?
3. **Alcance inicial**: ¬øDesea que comience con todas las p√°ginas o solo las principales (Login, Contacts, Campaigns)?

> [!WARNING]
> Este es un proyecto extenso que modificar√° **40+ archivos**. Se recomienda hacerlo en fases para facilitar el review.
